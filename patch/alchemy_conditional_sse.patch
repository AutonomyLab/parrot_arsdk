From c4de8682428bf770b1f88112014a7d86cf24d9e5 Mon Sep 17 00:00:00 2001
From: schumacb <Bastian.Schumacher@gmx.de>
Date: Mon, 4 Apr 2016 16:10:21 +0200
Subject: [PATCH] Only enable SSE on Systems with x86 or x64 CPU

This enables to build the SDK on raspberry pi.
---
 toolchains/linux/native/setup.mk | 16 ++++++++++++----
 1 file changed, 12 insertions(+), 4 deletions(-)

diff --git a/toolchains/linux/native/setup.mk b/toolchains/linux/native/setup.mk
index 8ea89ad..7314ca6 100644
--- a/toolchains/linux/native/setup.mk
+++ b/toolchains/linux/native/setup.mk
@@ -29,10 +29,18 @@ ifeq ("$(TARGET_OS_FLAVOUR)","native-chroot")
   TOOLCHAIN_LIBC := /
 endif
 
-TARGET_CPU_HAS_SSE2 := 1
-TARGET_CPU_HAS_SSSE3 := 1
-# -march=native seems better but this would most likely break distcc builds
-TARGET_GLOBAL_CFLAGS += -msse -msse2 -mssse3
+# Enable SSE for x86 and x64
+ifeq ("$(TARGET_ARCH)","x64")
+  TARGET_CPU_HAS_SSE2 := 1
+  TARGET_CPU_HAS_SSSE3 := 1
+  # -march=native seems better but this would most likely break distcc builds
+  TARGET_GLOBAL_CFLAGS += -msse -msse2 -mssse3
+else ifeq ("$(TARGET_ARCH)","x86")
+  TARGET_CPU_HAS_SSE2 := 1
+  TARGET_CPU_HAS_SSSE3 := 1
+  # -march=native seems better but this would most likely break distcc builds
+  TARGET_GLOBAL_CFLAGS += -msse -msse2 -mssse3
+endif
 
 # Get gdbserver path if available
 TOOLCHAIN_GDBSERVER := $(wildcard /usr/bin/gdbserver)
